<?xml version="1.0" ?>
<launch>

  <!-- Define the tool center point (tcp) link relative to the inverse kinematics link that Moveit uses 
       which is the last link in the kinematic chain. In our case, this is the wrist_3_link. -->
  <arg name="wrist_3_link_to_tcp_XYZYPR" default="0 0.269 0 0 0 0" />

  <!-- Rotate the grasp such that its orientation aligns with the tcp link. -->
  <arg name="grasp_to_grasp_aligned_XYZYPR" default="0 0 0 1.5707 0 1.5707" />

  <group ns="robot1">

    <!-- Moveit -->
    <include file="$(find ur10_robotiq_2f_140_moveit_config)/launch/ur10_robotiq_2f_140_moveit_planning_execution.launch">
      <arg name="use_rviz" value="false" />
    </include>

    <!-- grasp detection -->
    <include file="$(find chair_manipulation_grasp_detection)/launch/depth_image_detection.launch">
      <arg name="grasp_frame" value="robot1/grasp" />
    </include>

    <!-- wrist_3_link -> tcp -->
    <node name="robot1_wirst_3_link_to_tcp" pkg="tf2_ros" type="static_transform_publisher"
          args="$(arg wrist_3_link_to_tcp_XYZYPR) robot1/wrist_3_link robot1/tcp" />

    <!-- grasp -> grasp_tcp_aligned -->
    <node name="robot1_grasp_to_grasp_tcp_aligned" pkg="tf2_ros" type="static_transform_publisher"
          args="$(arg grasp_to_grasp_aligned_XYZYPR) robot1/grasp robot1/grasp_tcp_aligned" />

  </group>

  <group ns="robot2">

    <!-- Moveit -->
    <include file="$(find ur10_robotiq_2f_140_moveit_config)/launch/ur10_robotiq_2f_140_moveit_planning_execution.launch">
      <arg name="use_rviz" value="false" />
    </include>

    <!-- grasp detection -->
    <include file="$(find chair_manipulation_grasp_detection)/launch/depth_image_detection.launch">
      <arg name="grasp_frame" value="robot2/grasp" />
    </include>

    <!-- wrist_3_link -> tcp -->
    <node name="robot2_wirst_3_link_to_tcp" pkg="tf2_ros" type="static_transform_publisher" 
          args="$(arg wrist_3_link_to_tcp_XYZYPR) robot2/wrist_3_link robot2/tcp" />

    <!-- grasp -> grasp_tcp_aligned -->
    <node name="robot2_grasp_to_grasp_tcp_aligned"  pkg="tf2_ros" type="static_transform_publisher"
          args="$(arg grasp_to_grasp_aligned_XYZYPR) robot2/grasp robot2/grasp_tcp_aligned" />

  </group>

</launch>